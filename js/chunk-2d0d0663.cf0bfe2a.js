(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d0663"],{"688c":function(e,t,o){"use strict";o.r(t);o("fb6a");var n=o("7a23"),c={class:"bg-white boxshadow"},r={class:"container header"},a={class:"d-flex w-100 position-relative mb-4 mb-md-0 justify-content-center align-items-center justify-content-md-between align-items-md-end"},s=["src"],i={class:"d-none d-md-flex list-unstyled"},l={class:"d-flex position-relative align-items-end hoverLine hoverLine-primary"},d=Object(n["createElementVNode"])("div",{class:"roundShapeIcon roundShapeIcon-primary me-2"},[Object(n["createElementVNode"])("div",{class:"triangle"})],-1),u=Object(n["createTextVNode"])("台灣景點"),b={class:"d-flex position-relative align-items-end ms-6 hoverLine hoverLine-secondary"},m=Object(n["createElementVNode"])("div",{class:"roundShapeIcon roundShapeIcon-secondary me-2"},[Object(n["createElementVNode"])("div",{class:"square"})],-1),p=Object(n["createTextVNode"])("美食住宿"),h={class:"d-flex position-relative align-items-end ms-6 hoverLine hoverLine-danger"},f=Object(n["createElementVNode"])("div",{class:"roundShapeIcon roundShapeIcon-danger me-2"},[Object(n["createElementVNode"])("div",{class:"round"})],-1),j=Object(n["createTextVNode"])("景點交通"),O={class:"header-options d-md-none"},N={class:"d-flex justify-content-between list-unstyled"},S=Object(n["createTextVNode"])("景點活動"),v=Object(n["createTextVNode"])("美食住宿"),g=Object(n["createTextVNode"])("景點交通"),x={class:"input-group justify-content-center w-lg-50 w-md-70 w-100 mx-auto mt-6"},w=Object(n["createElementVNode"])("option",{value:""},"選擇縣市",-1),E=["value"],k=Object(n["createElementVNode"])("option",{value:""},"選擇路線",-1),V=["value"],y=["src"],T={key:0,class:"input-group w-lg-50 w-md-70 w-100 mx-auto mt-4"},R=Object(n["createElementVNode"])("option",{value:""},"選擇支線或主線",-1),C=["value"],B={class:"container"},I={key:0,class:"d-flex mt-md-5 w-lg-50 w-md-70 w-100 mx-auto"},D={class:"mb-0"},L=Object(n["createTextVNode"])("往 "),_={class:"text-primary ms-3"},M={class:"mb-0"},F=Object(n["createTextVNode"])("往 "),Z={class:"text-primary ms-3"},U={class:"container mt-10"},z={class:"text-end mb-0 text-primary"},$={class:"bg-white px-7 py-10"},A={key:0,class:"text-success h3"},J={class:"col"},Y={class:"mb-0 text-center flex-grow-1 text-bold fs-5"},H={class:"col"},q={class:"mb-0 text-center flex-grow-1 text-bold fs-5"},K=Object(n["createElementVNode"])("footer",{class:"text-center text-success bg-white py-lg-6 py-2"}," Taiwan Tourguide © Code: Sam / Design: KT",-1);function G(e,t,G,P,Q,W){var X=Object(n["resolveComponent"])("router-link"),ee=Object(n["resolveComponent"])("totopBtn");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("div",c,[Object(n["createElementVNode"])("nav",r,[Object(n["createElementVNode"])("div",a,[Object(n["createVNode"])(X,{onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(t){return e.type="scapeAct",e.option="all"}),["prevent"])),to:"/"},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("img",{class:"cursor-pointer taiLogo",src:o("9316"),alt:""},null,8,s)]})),_:1}),Object(n["createElementVNode"])("ul",i,[Object(n["createElementVNode"])("li",l,[d,Object(n["createVNode"])(X,{href:"#",onClick:t[1]||(t[1]=Object(n["withModifiers"])((function(t){return e.type="scapeAct",e.option="all"}),["prevent"])),to:"/",class:"stretched-link link-primary lh-24 text-decoration-none"},{default:Object(n["withCtx"])((function(){return[u]})),_:1})]),Object(n["createElementVNode"])("li",b,[m,Object(n["createVNode"])(X,{href:"#",onClick:t[2]||(t[2]=Object(n["withModifiers"])((function(t){return e.type="liveFood",e.option="all"}),["prevent"])),to:"/FoodLive",class:"stretched-link link-secondary text-decoration-none"},{default:Object(n["withCtx"])((function(){return[p]})),_:1})]),Object(n["createElementVNode"])("li",h,[f,Object(n["createVNode"])(X,{to:"/Traffic",class:"stretched-link link-danger text-decoration-none"},{default:Object(n["withCtx"])((function(){return[j]})),_:1})])])]),Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("ul",N,[Object(n["createElementVNode"])("li",null,[Object(n["createVNode"])(X,{href:"#",onClick:t[3]||(t[3]=Object(n["withModifiers"])((function(t){return e.type="scapeAct",e.option="all"}),["prevent"])),to:"/",class:"header-options-link text-decoration-none"},{default:Object(n["withCtx"])((function(){return[S]})),_:1})]),Object(n["createElementVNode"])("li",null,[Object(n["createVNode"])(X,{onClick:t[4]||(t[4]=Object(n["withModifiers"])((function(t){return e.type="liveFood",e.option="all"}),["prevent"])),to:"/FoodLive",class:"header-options-link text-decoration-none"},{default:Object(n["withCtx"])((function(){return[v]})),_:1})]),Object(n["createElementVNode"])("li",null,[Object(n["createVNode"])(X,{to:"/Traffic",class:"header-options-link text-decoration-none"},{default:Object(n["withCtx"])((function(){return[g]})),_:1})])])]),Object(n["createElementVNode"])("div",x,[Object(n["withDirectives"])(Object(n["createElementVNode"])("select",{class:"form-select me-1 rounded-3","onUpdate:modelValue":t[5]||(t[5]=function(e){return Q.city=e})},[w,(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(Q.place,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("option",{value:e.City,key:e.City},Object(n["toDisplayString"])(e.CityName),9,E)})),128))],512),[[n["vModelSelect"],Q.city]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("select",{class:"form-select me-1 rounded-3",onChange:t[6]||(t[6]=function(e){return Q.subRoutdName=""}),"onUpdate:modelValue":t[7]||(t[7]=function(e){return Q.routeName=e})},[k,(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(W.routeNames,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("option",{value:e.TaiwanTripName.Zh_tw,key:e.RouteUID},Object(n["toDisplayString"])(e.TaiwanTripName.Zh_tw),9,V)})),128))],544),[[n["vModelSelect"],Q.routeName]]),Object(n["createElementVNode"])("a",{href:"#",onClick:t[8]||(t[8]=Object(n["withModifiers"])((function(e){return W.getStopsData()}),["prevent"])),class:Object(n["normalizeClass"])([{disabled:W.switchSearch},"searchIcon rounded-3 btn"])},[Object(n["createElementVNode"])("img",{src:o("6f6b"),alt:""},null,8,y)],2)]),W.subRoutdNames?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",T,[Object(n["withDirectives"])(Object(n["createElementVNode"])("select",{class:"form-select rounded-3","onUpdate:modelValue":t[9]||(t[9]=function(e){return Q.subRoutdName=e})},[R,(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(W.subRoutdNames,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("option",{value:e.SubRouteUID,key:e.SubRouteID},[e.Headsign?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.SubRouteName.Zh_tw)+Object(n["toDisplayString"])(e.Headsign),1)],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.SubRouteName.Zh_tw),1)],64))],8,C)})),128))],512),[[n["vModelSelect"],Q.subRoutdName]])])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",B,[!W.subRoutdNames&&Q.routeName&&W.findRoute.SubRoutes.length>1&&Q.searchRouteStops[0]?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",I,[Object(n["createElementVNode"])("a",{href:"#",class:Object(n["normalizeClass"])([{"border-bottom":0===Q.stopIndex},"text-center mb-0 flex-grow-1 text-dark flex-grow-1 text-decoration-none border-3 border-primary"]),onClick:t[10]||(t[10]=Object(n["withModifiers"])((function(e){return Q.stopIndex=0}),["prevent"]))},[Object(n["createElementVNode"])("p",D,[L,Object(n["createElementVNode"])("span",_,Object(n["toDisplayString"])(W.findRoute.DestinationStopNameZh),1)])],2),Object(n["createElementVNode"])("a",{href:"#",onClick:t[11]||(t[11]=Object(n["withModifiers"])((function(e){return Q.stopIndex=1}),["prevent"])),class:Object(n["normalizeClass"])([{"border-bottom":1===Q.stopIndex},"text-center mb-0 flex-grow-1 text-dark flex-grow-1 text-decoration-none border-3 border-primary"])},[Object(n["createElementVNode"])("p",M,[F,Object(n["createElementVNode"])("span",Z,Object(n["toDisplayString"])(W.findRoute.DepartureStopNameZh),1)])],2)])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createElementVNode"])("div",U,[Object(n["createElementVNode"])("p",z,"*每隔 15 秒自動更新 "+Object(n["toDisplayString"])(Q.second)+" 秒",1),Object(n["createElementVNode"])("div",$,[W.stops[0]?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("p",A,"請選擇公車路線")),Object(n["createElementVNode"])("ul",{class:Object(n["normalizeClass"])([{"vh-100":!W.stops[0]},"list-unstyled row row-cols-md-2 row-cols-1"])},[Object(n["createElementVNode"])("div",J,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(W.stops.slice(0,Math.round(W.stops.length/2)),(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:e.StopName.Zh_tw,class:"d-flex align-items-center mb-3"},[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])([W.changTimeClass(W.changTimeInfo(e)),"rounded-3 border-3 border py-3 min-h-120 text-center text-bold fs-5"])},Object(n["toDisplayString"])(W.changTimeInfo(e)),3),Object(n["createElementVNode"])("p",Y,Object(n["toDisplayString"])(e.StopName.Zh_tw),1)])})),128))]),Object(n["createElementVNode"])("div",H,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(W.stops.slice(Math.round(W.stops.length/2),W.stops.length),(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:e.StopName.Zh_tw,class:"d-flex align-items-center mb-3"},[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])([W.changTimeClass(W.changTimeInfo(e)),"rounded-3 border-3 border py-3 min-h-120 text-center text-bold fs-5"])},Object(n["toDisplayString"])(W.changTimeInfo(e)),3),Object(n["createElementVNode"])("p",q,Object(n["toDisplayString"])(e.StopName.Zh_tw),1)])})),128))])],2)])]),W.changeTotopbtn?(Object(n["openBlock"])(),Object(n["createBlock"])(ee,{key:0})):Object(n["createCommentVNode"])("",!0),K],64)}o("d3b7"),o("159b"),o("4de4"),o("99af"),o("7db0");var P=o("b182"),Q=o("3b90"),W=o("02fd"),X={components:{totopBtn:W["a"]},data:function(){return{place:null,city:"",routeName:"",subRoutdName:"",routeData:[],searchRouteStops:[],goStops:[],backStops:[],subStops:[],aloneStops:[],stopIndex:0,second:0,tiemControl:[],storageRouteName:"",windowY:0}},methods:{getStopsData:function(){var e=this;this.goStops=[],this.subStops=[],this.aloneStops=[],this.backStops=[],this.second=0,this.storageRouteName=this.routeName,this.clearCountsecond();var t="https://tdx.transportdata.tw/api/basic/v2/Tourism/Bus/StopOfRoute/TaiwanTrip/".concat(this.routeName,"?$&$format=JSON");this.$http.get(t,{headers:Object(Q["a"])()}).then((function(t){e.searchRouteStops=t.data,e.countSecond(),e.getStopsTime()})).catch((function(e){console.log(e)}))},getStopsTime:function(){var e=this,t="https://tdx.transportdata.tw/api/basic/v2/Tourism/Bus/EstimatedTimeOfArrival/TaiwanTrip/".concat(this.storageRouteName,"?");this.$http.get(t,{headers:Object(Q["a"])()}).then((function(t){e.updataTime(t.data)})).catch((function(e){console.log(e)}))},countSecond:function(){var e=this,t=setInterval((function(){if(15===e.second)return e.second=0,void clearInterval(t);e.second+=1}),1e3);this.tiemControl.push(t)},clearCountsecond:function(){this.tiemControl.forEach((function(e){clearInterval(e)}))},updataTime:function(e){var t=this,o=function(e,t){if(e.StopUID===t.StopUID){var o=e;o.EstimateTime=t.EstimateTime,o.StopStatus=t.StopStatus}};if(1===this.stopIndex||0===this.stopIndex){var n=e.filter((function(e){return 0===e.Direction})),c=e.filter((function(e){return 1===e.Direction}));this.goStops.forEach((function(e){n.forEach((function(t){o(e,t)}))})),this.backStops.forEach((function(e){c.forEach((function(t){o(e,t)}))}))}if(3===this.stopIndex&&(this.aloneStops.forEach((function(t){e.forEach((function(e){o(t,e)}))})),console.log(this.aloneStops)),2===this.stopIndex){var r=e.filter((function(e){return e.SubRouteUID===t.subRoutdName}));this.subStops.forEach((function(e){r.forEach((function(t){o(e,t)}))})),console.log(this.subStops)}},changTimeInfo:function(e){var t,o=e.EstimateTime,n=e.StopStatus;if(0!==n)return t=1===n?"尚未發車":2===n?"交管不停靠":3===n?"末班車已過":"今日未營運",t;if(o){var c=o>60?Math.floor(o/60):0,r=o-60*c;if(o<100)return"進站中";var a=c>1?"".concat(c," : ").concat(r):"".concat(r);return a}return"離站中"},changTimeClass:function(e){var t=[];return t="尚未發車"===e?["border-success","text-success"]:"進站中"===e?["border-primary","bg-primary","text-white"]:"離站中"===e?["border-secondary","bg-secondary","text-white"]:["border-dark"],t},countScroll:function(){this.windowY=window.scrollY}},computed:{routeNames:function(){var e=this;return this.city?this.routeData.filter((function(t){return t.City===e.city})):this.routeData.filter((function(e){return!e.City}))},subRoutdNames:function(){return this.routeName&&this.findRoute.SubRoutes.length>2?this.findRoute.SubRoutes:""},switchSearch:function(){return this.subRoutdNames?!this.subRoutdName:!this.routeName},findRoute:function(){var e=this;return this.routeData.find((function(t){return t.TaiwanTripName.Zh_tw===e.routeName}))},stops:function(){return 1===this.stopIndex?this.backStops:2===this.stopIndex?this.subStops:0===this.stopIndex?this.goStops:3===this.stopIndex?this.aloneStops:""},changeTotopbtn:function(){return this.windowY>300}},watch:{routeNames:function(){this.routeName=""},subRoutdNames:function(){this.subRoutdNames||(this.subRoutdName="")},searchRouteStops:function(){var e=this;return this.subRoutdName?(this.subStops=this.searchRouteStops.find((function(t){return t.SubRouteUID===e.subRoutdName})).Stops,void(this.stopIndex=2)):1===this.searchRouteStops.length?(console.log(this.searchRouteStops),this.aloneStops=this.searchRouteStops[0].Stops,void(this.stopIndex=3)):(this.stopIndex=0,this.goStops=this.searchRouteStops.find((function(e){return 0===e.Direction})).Stops,void(this.backStops=this.searchRouteStops.find((function(e){return 1===e.Direction})).Stops))},second:function(){15===this.second&&(this.getStopsTime(),this.countSecond())}},created:function(){var e=this,t="https://tdx.transportdata.tw/api/basic/v2/Tourism/Bus/Route/TaiwanTrip?$format=JSON";this.$http.get(t,{headers:Object(Q["a"])()}).then((function(t){e.routeData=t.data})).catch((function(e){console.log(e)})),this.place=P},mounted:function(){window.addEventListener("scroll",this.countScroll)},unmounted:function(){window.removeEventListener("scroll",this.countScroll)}},ee=o("6b0d"),te=o.n(ee);const oe=te()(X,[["render",G]]);t["default"]=oe}}]);
//# sourceMappingURL=chunk-2d0d0663.cf0bfe2a.js.map